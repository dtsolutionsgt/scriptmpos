CREATE TABLE [dbo].[D_MOV_ALMACEN](
	[COREL] [nvarchar](20) NOT NULL,
	[CODIGO_SUCURSAL] [int] NOT NULL,
	[ALMACEN_ORIGEN] [int] NULL,
	[ALMACEN_DESTINO] [int] NULL,
	[ANULADO] [bit] NOT NULL,
	[FECHA] [datetime] NULL,
	[TIPO] [nvarchar](1) NULL,
	[USUARIO] [int] NOT NULL,
	[REFERENCIA] [nvarchar](15) NULL,
	[STATCOM] [nvarchar](1) NULL,
	[IMPRES] [int] NULL,
	[CODIGOLIQUIDACION] [int] NOT NULL,
	[CODIGO_PROVEEDOR] [int] NOT NULL,
	[TOTAL] [float] NOT NULL,
 CONSTRAINT [PK_D_MOV_ALMACEN] PRIMARY KEY CLUSTERED 
(
	[COREL] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[D_MOV_ALMACEN] ADD  CONSTRAINT [DF_D_MOV_ALMACEN_CODIGOLIQUIDACION]  DEFAULT ((0)) FOR [CODIGOLIQUIDACION]
GO

ALTER TABLE [dbo].[D_MOV_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_D_MOV_ALMACEN_P_SUCURSAL] FOREIGN KEY([CODIGO_SUCURSAL])
REFERENCES [dbo].[P_SUCURSAL] ([CODIGO_SUCURSAL])
GO

ALTER TABLE [dbo].[D_MOV_ALMACEN] CHECK CONSTRAINT [FK_D_MOV_ALMACEN_P_SUCURSAL]
GO

ALTER TABLE [dbo].[D_MOV_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_D_MOV_ALMACEN_VENDEDORES] FOREIGN KEY([USUARIO])
REFERENCES [dbo].[VENDEDORES] ([CODIGO_VENDEDOR])
GO

ALTER TABLE [dbo].[D_MOV_ALMACEN] CHECK CONSTRAINT [FK_D_MOV_ALMACEN_VENDEDORES]
GO


------------------------

CREATE TABLE [dbo].[D_MOVD_ALMACEN](
	[COREL] [nvarchar](20) NOT NULL,
	[PRODUCTO] [int] NOT NULL,
	[CANT] [float] NULL,
	[CANTM] [float] NULL,
	[PESO] [float] NULL,
	[PESOM] [float] NULL,
	[LOTE] [nvarchar](20) NOT NULL,
	[CODIGOLIQUIDACION] [int] NULL,
	[UNIDADMEDIDA] [nvarchar](10) NOT NULL,
	[CORELDET] [int] IDENTITY(1,1) NOT NULL,
	[PRECIO] [float] NOT NULL,
	[MOTIVO_AJUSTE] [int] NOT NULL,
 CONSTRAINT [PK_D_MOVD_ALMACEN] PRIMARY KEY CLUSTERED 
(
	[CORELDET] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[D_MOVD_ALMACEN] ADD  CONSTRAINT [DF_D_MOVD_ALMACEN_LOTE]  DEFAULT ('') FOR [LOTE]
GO

ALTER TABLE [dbo].[D_MOVD_ALMACEN] ADD  CONSTRAINT [DF_D_MOVD_ALMACEN_CODIGOLIQUIDACION]  DEFAULT ((0)) FOR [CODIGOLIQUIDACION]
GO

ALTER TABLE [dbo].[D_MOVD_ALMACEN] ADD  CONSTRAINT [DF_D_MOVD_ALMACEN_UNIDADMEDIDA]  DEFAULT ('') FOR [UNIDADMEDIDA]
GO

ALTER TABLE [dbo].[D_MOVD_ALMACEN] ADD  CONSTRAINT [DF_D_MOVD_ALMACEN_MOTIVO_AJUSTE]  DEFAULT ((0)) FOR [MOTIVO_AJUSTE]
GO

ALTER TABLE [dbo].[D_MOVD_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_D_MOVD_ALMACEN_D_MOV_ALMACEN] FOREIGN KEY([COREL])
REFERENCES [dbo].[D_MOV_ALMACEN] ([COREL])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[D_MOVD_ALMACEN] CHECK CONSTRAINT [FK_D_MOVD_ALMACEN_D_MOV_ALMACEN]
GO

ALTER TABLE [dbo].[D_MOVD_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_D_MOVD_ALMACEN_P_PRODUCTO] FOREIGN KEY([PRODUCTO])
REFERENCES [dbo].[P_PRODUCTO] ([CODIGO_PRODUCTO])
GO

ALTER TABLE [dbo].[D_MOVD_ALMACEN] CHECK CONSTRAINT [FK_D_MOVD_ALMACEN_P_PRODUCTO]
GO


-----------------------------------------------------------------------------


CREATE TABLE [dbo].[P_ALMACEN](
	[CODIGO_ALMACEN] [int] IDENTITY(1,1) NOT NULL,
	[EMPRESA] [int] NULL,
	[CODIGO_SUCURSAL] [int] NULL,
	[ACTIVO] [bit] NULL,
	[NOMBRE] [nvarchar](50) NULL,
	[ES_PRINCIPAL] [bit] NULL,
 CONSTRAINT [PK_P_ALMACEN] PRIMARY KEY CLUSTERED 
(
	[CODIGO_ALMACEN] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[P_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_P_ALMACEN_P_EMPRESA] FOREIGN KEY([EMPRESA])
REFERENCES [dbo].[P_EMPRESA] ([EMPRESA])
GO

ALTER TABLE [dbo].[P_ALMACEN] CHECK CONSTRAINT [FK_P_ALMACEN_P_EMPRESA]
GO

ALTER TABLE [dbo].[P_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_P_ALMACEN_P_SUCURSAL] FOREIGN KEY([CODIGO_SUCURSAL])
REFERENCES [dbo].[P_SUCURSAL] ([CODIGO_SUCURSAL])
GO

ALTER TABLE [dbo].[P_ALMACEN] CHECK CONSTRAINT [FK_P_ALMACEN_P_SUCURSAL]
GO


------------------------------------------------------------------------------------

CREATE TABLE [dbo].[P_STOCK_ALMACEN](
	[CODIGO_STOCK] [int] IDENTITY(1,1) NOT NULL,
	[EMPRESA] [int] NOT NULL,
	[CODIGO_SUCURSAL] [int] NOT NULL,
	[CODIGO_ALMACEN] [int] NOT NULL,
	[CODIGO_PRODUCTO] [int] NOT NULL,
	[UNIDADMEDIDA] [nvarchar](10) NOT NULL,
	[LOTE] [nvarchar](20) NOT NULL,
	[CANT] [float] NOT NULL,
	[CANTM] [float] NOT NULL,
	[PESO] [float] NOT NULL,
	[PESOM] [float] NOT NULL,
	[ANULADO] [bit] NOT NULL,
 CONSTRAINT [PK_P_STOCK_ALMACEN] PRIMARY KEY CLUSTERED 
(
	[CODIGO_STOCK] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] ADD  CONSTRAINT [DF_P_STOCK_ALMACEN_ALMACEN_ORIGEN]  DEFAULT ((0)) FOR [CODIGO_ALMACEN]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] ADD  CONSTRAINT [DF_P_STOCK_ALMACEN_LOTE]  DEFAULT ('') FOR [LOTE]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] ADD  CONSTRAINT [DF_P_STOCK_ALMACEN_CANT]  DEFAULT ((0)) FOR [CANT]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] ADD  CONSTRAINT [DF_P_STOCK_ALMACEN_CANTM]  DEFAULT ((0)) FOR [CANTM]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] ADD  CONSTRAINT [DF_P_STOCK_ALMACEN_PESO]  DEFAULT ((0)) FOR [PESO]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] ADD  CONSTRAINT [DF_P_STOCK_ALMACEN_PESOM]  DEFAULT ((0)) FOR [PESOM]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] ADD  CONSTRAINT [DF_P_STOCK_ALMACEN_ANULADO]  DEFAULT ((0)) FOR [ANULADO]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_P_STOCK_ALMACEN_P_ALMACEN] FOREIGN KEY([CODIGO_ALMACEN])
REFERENCES [dbo].[P_ALMACEN] ([CODIGO_ALMACEN])
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] CHECK CONSTRAINT [FK_P_STOCK_ALMACEN_P_ALMACEN]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_P_STOCK_ALMACEN_P_EMPRESA] FOREIGN KEY([EMPRESA])
REFERENCES [dbo].[P_EMPRESA] ([EMPRESA])
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] CHECK CONSTRAINT [FK_P_STOCK_ALMACEN_P_EMPRESA]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_P_STOCK_ALMACEN_P_PRODUCTO] FOREIGN KEY([CODIGO_PRODUCTO])
REFERENCES [dbo].[P_PRODUCTO] ([CODIGO_PRODUCTO])
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] CHECK CONSTRAINT [FK_P_STOCK_ALMACEN_P_PRODUCTO]
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_P_STOCK_ALMACEN_P_SUCURSAL] FOREIGN KEY([CODIGO_SUCURSAL])
REFERENCES [dbo].[P_SUCURSAL] ([CODIGO_SUCURSAL])
GO

ALTER TABLE [dbo].[P_STOCK_ALMACEN] CHECK CONSTRAINT [FK_P_STOCK_ALMACEN_P_SUCURSAL]
GO



